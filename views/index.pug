extends layout

append head
  //- add page specific styles by appending to the head
  link(rel="stylesheet" href="/stylesheets/index.css")
  //- add page specific js
  script(src="/javascripts/index.js" type="module" defer)
  script(src='/javascripts/questions.js' type='module' defer)


block content
  form(method='post' action='/search/keyword')
    div 
      input(type='text' name='searchBar' placeholder='Search...')
      button(type='submit') Search Keyword
      input(type='hidden' name='_csrf' value=csrfToken)
  
  if user
    div(class='containAll')
      div(class='opening')
        p(class='greeting') Welcome to MyQuery, #{user.username}!

    
    

  else
    div(class='containAll')
      div(class='opening')
        p(class='greeting') Welcome to MyQuery!
      div(class='opening')
        a(href='/users/register') Register
      div(class='opening')
        a(href='/users/login') Login
  div(class='containAll')
    form(method='get' action='/questions')
      div(class='opening')
        button(type='submit') Ask A Question

  include utils.pug

  each question in questions
    div(class='containAll')
      div(class='questionsContainer')
        a(href=`/answers/${question.id}`)
          p(class='home-questions')= question.content
      div(class='tagsContainer')
        div(class='tags')
          p(class='tag') Tags: 
        each tag in question.Tags
          a(href=`tags/${tag.id}` name='tag')= tag.name
      div(class='userNameContainer')
        div(class='username')
          label(name='username')= question.User.username
      div(class='buttonsContainer')
        button(id=`edit-${question.id}` type='button' class= 'edit-button') Edit
        button(id=`delete-${question.id}` type='button' class= 'delete-button') Delete
        button(id=`answer-${question.id}` type='button' class= 'answer-button') Answers
   
  div 
    form(method='post' action='/search/tags')
          div 
              h2 Please Select From These Available Topics 
          
          each tag in Tags 
          
              input(type='checkbox' name=tag.name value=tag.id)
              label= tag.name
          
          div 
              button(type='submit') Search Tags
              input(type='hidden' name='_csrf' value=csrfToken)
    
